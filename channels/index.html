
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../contracts/fate/">
      
      
        <link rel="next" href="ON-CHAIN/">
      
      <link rel="icon" href="../favicon.png">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-9.0.9">
    
    
      
        <title>General - æternity Protocol</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.0d440cfe.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.2505c338.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="pink" data-md-color-accent="pink">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#state-channels" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="æternity Protocol" class="md-header__button md-logo" aria-label="æternity Protocol" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            æternity Protocol
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              General
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="pink" data-md-color-accent="pink"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31Z"/></svg>
            </label>
          
        
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="pink" data-md-color-accent="pink"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22Z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/aeternity/protocol" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="æternity Protocol" class="md-nav__button md-logo" aria-label="æternity Protocol" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    æternity Protocol
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/aeternity/protocol" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Introduction
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
      
      
      
        <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
          Communication
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Communication
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../GOSSIP/" class="md-nav__link">
        Gossip
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../sync/" class="md-nav__link">
        Sync
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
      
      
      
        <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
          Consensus
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Consensus
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../consensus/" class="md-nav__link">
        General
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../consensus/bitcoin-ng/" class="md-nav__link">
        Bitcoin-NG
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../consensus/coinbase/" class="md-nav__link">
        Coinbase
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../consensus/locking/" class="md-nav__link">
        Locking
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
      
      
      
        <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
          Features
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Features
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../generalized_accounts/" class="md-nav__link">
        Generalized Accounts
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../AENS/" class="md-nav__link">
        Naming System
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3" >
      
      
      
        <label class="md-nav__link" for="__nav_4_3" id="__nav_4_3_label" tabindex="0">
          Oracles
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4_3">
          <span class="md-nav__icon md-icon"></span>
          Oracles
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../oracles/" class="md-nav__link">
        General
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../oracles/oracle_life_cycle/" class="md-nav__link">
        Lifecycle Examples
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../oracles/oracle_state_tree/" class="md-nav__link">
        State Tree
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../oracles/oracle_transactions/" class="md-nav__link">
        Transactions
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_4" >
      
      
      
        <label class="md-nav__link" for="__nav_4_4" id="__nav_4_4_label" tabindex="0">
          Smart Contracts
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4_4">
          <span class="md-nav__icon md-icon"></span>
          Smart Contracts
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../contracts/" class="md-nav__link">
        General
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../contracts/events/" class="md-nav__link">
        Events
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../contracts/contract_transactions/" class="md-nav__link">
        Transaction Types
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../contracts/contract_state_tree/" class="md-nav__link">
        State Tree
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_4_5" >
      
      
      
        <label class="md-nav__link" for="__nav_4_4_5" id="__nav_4_4_5_label" tabindex="0">
          Virtual Machines
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_4_5_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4_4_5">
          <span class="md-nav__icon md-icon"></span>
          Virtual Machines
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../contracts/contract_vms/" class="md-nav__link">
        General
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../contracts/aevm/" class="md-nav__link">
        AEVM
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../contracts/fate/" class="md-nav__link">
        FATE VM
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_5" checked>
      
      
      
        <label class="md-nav__link" for="__nav_4_5" id="__nav_4_5_label" tabindex="0">
          State Channels
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_5_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_4_5">
          <span class="md-nav__icon md-icon"></span>
          State Channels
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          General
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        General
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#terms" class="md-nav__link">
    Terms
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#notation" class="md-nav__link">
    Notation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#goals" class="md-nav__link">
    Goals
  </a>
  
    <nav class="md-nav" aria-label="Goals">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#privacy" class="md-nav__link">
    Privacy
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#security" class="md-nav__link">
    Security
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#speed" class="md-nav__link">
    Speed
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cost" class="md-nav__link">
    Cost
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#channel-types" class="md-nav__link">
    Channel types
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#topology" class="md-nav__link">
    Topology
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#incentives" class="md-nav__link">
    Incentives
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#artefacts" class="md-nav__link">
    Artefacts
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fees" class="md-nav__link">
    Fees
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#protocol" class="md-nav__link">
    Protocol
  </a>
  
    <nav class="md-nav" aria-label="Protocol">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#communication" class="md-nav__link">
    Communication
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    Overview
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#contract-execution" class="md-nav__link">
    Contract execution
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#node-configuration" class="md-nav__link">
    Node configuration
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#light-node-requirements" class="md-nav__link">
    Light node requirements
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#future-work" class="md-nav__link">
    Future Work
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#references" class="md-nav__link">
    References
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="ON-CHAIN/" class="md-nav__link">
        On-Chain Actions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="OFF-CHAIN/" class="md-nav__link">
        Off-Chain Actions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="state/" class="md-nav__link">
        Off-Chain State
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
      
      
      
        <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
          Node API
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Node API
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/" class="md-nav__link">
        General
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/api_encoding/" class="md-nav__link">
        Encoding
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_3" >
      
      
      
        <label class="md-nav__link" for="__nav_5_3" id="__nav_5_3_label" tabindex="0">
          API Usage
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_5_3">
          <span class="md-nav__icon md-icon"></span>
          API Usage
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/account_api_usage/" class="md-nav__link">
        Account API
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/channels_api_usage/" class="md-nav__link">
        Channels API
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/contract_api_usage/" class="md-nav__link">
        Contract API
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/mining_api_usage/" class="md-nav__link">
        Mining API
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/naming_system_api_usage/" class="md-nav__link">
        Naming System API
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/oracle_api_usage/" class="md-nav__link">
        Oracle API
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/spend_api_usage/" class="md-nav__link">
        Spend API
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_4" >
      
      
      
        <label class="md-nav__link" for="__nav_5_4" id="__nav_5_4_label" tabindex="0">
          State Channels
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_5_4">
          <span class="md-nav__icon md-icon"></span>
          State Channels
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/channel_ws_api/" class="md-nav__link">
        WebSocket API
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_4_2" >
      
      
      
        <label class="md-nav__link" for="__nav_5_4_2" id="__nav_5_4_2_label" tabindex="0">
          Examples
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_5_4_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_5_4_2">
          <span class="md-nav__icon md-icon"></span>
          Examples
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/" class="md-nav__link">
        General
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_4_2_2" >
      
      
      
        <label class="md-nav__link" for="__nav_5_4_2_2" id="__nav_5_4_2_2_label" tabindex="0">
          JSON-RPC
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_5_4_2_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_5_4_2_2">
          <span class="md-nav__icon md-icon"></span>
          JSON-RPC
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_4_2_2_1" >
      
      
      
        <label class="md-nav__link" for="__nav_5_4_2_2_1" id="__nav_5_4_2_2_1_label" tabindex="0">
          Abort Updates
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_5_4_2_2_1_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_5_4_2_2_1">
          <span class="md-nav__icon md-icon"></span>
          Abort Updates
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/abort_updates/sc_ws_abort_deposit/" class="md-nav__link">
        abort_deposit
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/abort_updates/sc_ws_abort_offchain_update/" class="md-nav__link">
        abort_offchain_update
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/abort_updates/sc_ws_abort_settle/" class="md-nav__link">
        abort_settle
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/abort_updates/sc_ws_abort_shutdown/" class="md-nav__link">
        abort_shutdown
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/abort_updates/sc_ws_abort_slash/" class="md-nav__link">
        abort_slash
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/abort_updates/sc_ws_abort_snapshot_solo/" class="md-nav__link">
        abort_snapshot_solo
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/abort_updates/sc_ws_abort_withdraw/" class="md-nav__link">
        abort_withdraw
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/abort_updates/sc_ws_can_not_abort_while_open/" class="md-nav__link">
        can_not_abort_while_open
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_4_2_2_2" >
      
      
      
        <label class="md-nav__link" for="__nav_5_4_2_2_2" id="__nav_5_4_2_2_2_label" tabindex="0">
          Assume Min Depth
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_5_4_2_2_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_5_4_2_2_2">
          <span class="md-nav__icon md-icon"></span>
          Assume Min Depth
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/assume_min_depth/sc_ws_basic_open_close/" class="md-nav__link">
        basic_open_close
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_4_2_2_3" >
      
      
      
        <label class="md-nav__link" for="__nav_5_4_2_2_3" id="__nav_5_4_2_2_3_label" tabindex="0">
          Both Sign
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_5_4_2_2_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_5_4_2_2_3">
          <span class="md-nav__icon md-icon"></span>
          Both Sign
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/both_sign/init_per_group/" class="md-nav__link">
        init_per_group
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_4_2_2_3_2" >
      
      
      
        <label class="md-nav__link" for="__nav_5_4_2_2_3_2" id="__nav_5_4_2_2_3_2_label" tabindex="0">
          conflicts
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="6" aria-labelledby="__nav_5_4_2_2_3_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_5_4_2_2_3_2">
          <span class="md-nav__icon md-icon"></span>
          conflicts
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/both_sign/conflicts/sc_ws_conflict_deposit_and_offchain_update/" class="md-nav__link">
        conflict_deposit_and_offchain_update
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/both_sign/conflicts/sc_ws_conflict_two_deposits/" class="md-nav__link">
        conflict_two_deposits
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/both_sign/conflicts/sc_ws_conflict_two_offchain_updates/" class="md-nav__link">
        conflict_two_offchain_updates
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/both_sign/conflicts/sc_ws_conflict_two_withdrawals/" class="md-nav__link">
        conflict_two_withdrawals
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/both_sign/conflicts/sc_ws_conflict_withdrawal_and_deposit/" class="md-nav__link">
        conflict_withdrawal_and_deposit
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/both_sign/conflicts/sc_ws_conflict_withdrawal_and_offchain_update/" class="md-nav__link">
        conflict_withdrawal_and_offchain_update
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_4_2_2_4" >
      
      
      
        <label class="md-nav__link" for="__nav_5_4_2_2_4" id="__nav_5_4_2_2_4_label" tabindex="0">
          Changeable Fee
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_5_4_2_2_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_5_4_2_2_4">
          <span class="md-nav__icon md-icon"></span>
          Changeable Fee
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/changeable_fee/sc_ws_set_fee_close_mutual/" class="md-nav__link">
        set_fee_close_mutual
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/changeable_fee/sc_ws_set_fee_close_solo/" class="md-nav__link">
        set_fee_close_solo
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/changeable_fee/sc_ws_set_fee_create/" class="md-nav__link">
        set_fee_create
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/changeable_fee/sc_ws_set_fee_deposit/" class="md-nav__link">
        set_fee_deposit
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/changeable_fee/sc_ws_set_fee_settle/" class="md-nav__link">
        set_fee_settle
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/changeable_fee/sc_ws_set_fee_slash/" class="md-nav__link">
        set_fee_slash
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/changeable_fee/sc_ws_set_fee_snapshot/" class="md-nav__link">
        set_fee_snapshot
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/changeable_fee/sc_ws_set_fee_withdrawal/" class="md-nav__link">
        set_fee_withdrawal
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_4_2_2_5" >
      
      
      
        <label class="md-nav__link" for="__nav_5_4_2_2_5" id="__nav_5_4_2_2_5_label" tabindex="0">
          Continuous
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_5_4_2_2_5_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_5_4_2_2_5">
          <span class="md-nav__icon md-icon"></span>
          Continuous
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/continuous/init_per_group/" class="md-nav__link">
        init_per_group
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/continuous/sc_ws_deposit/" class="md-nav__link">
        deposit
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/continuous/sc_ws_failed_update/" class="md-nav__link">
        failed_update
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/continuous/sc_ws_generic_messages/" class="md-nav__link">
        generic_messages
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/continuous/sc_ws_ping_pong/" class="md-nav__link">
        ping_pong
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/continuous/sc_ws_update_conflict/" class="md-nav__link">
        update_conflict
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/continuous/sc_ws_withdraw/" class="md-nav__link">
        withdraw
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_4_2_2_6" >
      
      
      
        <label class="md-nav__link" for="__nav_5_4_2_2_6" id="__nav_5_4_2_2_6_label" tabindex="0">
          Contracts
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_5_4_2_2_6_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_5_4_2_2_6">
          <span class="md-nav__icon md-icon"></span>
          Contracts
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/contracts/init_per_group/" class="md-nav__link">
        init_per_group
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/contracts/sc_ws_basic_contracts/" class="md-nav__link">
        basic_contract
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/contracts/sc_ws_environment_contract/" class="md-nav__link">
        environment_contract
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/contracts/sc_ws_nameservice_contract/" class="md-nav__link">
        nameservice_contract
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/contracts/sc_ws_oracle_contract/" class="md-nav__link">
        oracle_contract
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/contracts/sc_ws_remote_call_contract/" class="md-nav__link">
        remote_call_contract
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/contracts/sc_ws_remote_call_contract_refering_onchain_data/" class="md-nav__link">
        remote_call_contract_refering_onchain_data
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/contracts/sc_ws_wrong_call_data/" class="md-nav__link">
        wrong_call_data
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_4_2_2_7" >
      
      
      
        <label class="md-nav__link" for="__nav_5_4_2_2_7" id="__nav_5_4_2_2_7_label" tabindex="0">
          Force Progress
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_5_4_2_2_7_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_5_4_2_2_7">
          <span class="md-nav__icon md-icon"></span>
          Force Progress
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/force_progress/sc_ws_force_progress_based_on_offchain_state/" class="md-nav__link">
        force_progress_based_on_offchain_state
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/force_progress/sc_ws_force_progress_based_on_onchain_state/" class="md-nav__link">
        force_progress_based_on_onchain_state
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_4_2_2_8" >
      
      
      
        <label class="md-nav__link" for="__nav_5_4_2_2_8" id="__nav_5_4_2_2_8_label" tabindex="0">
          Generalized Accounts
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_5_4_2_2_8_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_5_4_2_2_8">
          <span class="md-nav__icon md-icon"></span>
          Generalized Accounts
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_4_2_2_8_1" >
      
      
      
        <label class="md-nav__link" for="__nav_5_4_2_2_8_1" id="__nav_5_4_2_2_8_1_label" tabindex="0">
          both
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="6" aria-labelledby="__nav_5_4_2_2_8_1_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_5_4_2_2_8_1">
          <span class="md-nav__icon md-icon"></span>
          both
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/generalized_accounts/both/sc_ws_basic_open_close/" class="md-nav__link">
        basic_open_close
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_4_2_2_8_2" >
      
      
      
        <label class="md-nav__link" for="__nav_5_4_2_2_8_2" id="__nav_5_4_2_2_8_2_label" tabindex="0">
          initiator
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="6" aria-labelledby="__nav_5_4_2_2_8_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_5_4_2_2_8_2">
          <span class="md-nav__icon md-icon"></span>
          initiator
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/generalized_accounts/initiator/sc_ws_basic_open_close/" class="md-nav__link">
        basic_open_close
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_4_2_2_8_3" >
      
      
      
        <label class="md-nav__link" for="__nav_5_4_2_2_8_3" id="__nav_5_4_2_2_8_3_label" tabindex="0">
          responder
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="6" aria-labelledby="__nav_5_4_2_2_8_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_5_4_2_2_8_3">
          <span class="md-nav__icon md-icon"></span>
          responder
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/generalized_accounts/responder/sc_ws_basic_open_close/" class="md-nav__link">
        basic_open_close
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_4_2_2_9" >
      
      
      
        <label class="md-nav__link" for="__nav_5_4_2_2_9" id="__nav_5_4_2_2_9_label" tabindex="0">
          Only One Signs
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_5_4_2_2_9_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_5_4_2_2_9">
          <span class="md-nav__icon md-icon"></span>
          Only One Signs
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/only_one_signs/init_per_group/" class="md-nav__link">
        init_per_group
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/only_one_signs/sc_ws_conflict_on_new_offchain/" class="md-nav__link">
        conflict_on_new_offchain
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/only_one_signs/sc_ws_conflict_snapshot_and_offchain_update/" class="md-nav__link">
        sc_ws_conflict_snapshot_and_offchain_update
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_4_2_2_9_4" >
      
      
      
        <label class="md-nav__link" for="__nav_5_4_2_2_9_4" id="__nav_5_4_2_2_9_4_label" tabindex="0">
          conflicts
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="6" aria-labelledby="__nav_5_4_2_2_9_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_5_4_2_2_9_4">
          <span class="md-nav__icon md-icon"></span>
          conflicts
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/only_one_signs/conflicts/sc_ws_conflict_deposit_and_offchain_update/" class="md-nav__link">
        conflict_deposit_and_offchain_update
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/only_one_signs/conflicts/sc_ws_conflict_two_deposits/" class="md-nav__link">
        conflict_two_deposits
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/only_one_signs/conflicts/sc_ws_conflict_two_offchain_updates/" class="md-nav__link">
        conflict_two_offchain_updates
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/only_one_signs/conflicts/sc_ws_conflict_two_withdrawals/" class="md-nav__link">
        conflict_two_withdrawals
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/only_one_signs/conflicts/sc_ws_conflict_withdrawal_and_deposit/" class="md-nav__link">
        conflict_withdrawal_and_deposit
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/only_one_signs/conflicts/sc_ws_conflict_withdrawal_and_offchain_update/" class="md-nav__link">
        conflict_withdrawal_and_offchain_update
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_4_2_2_10" >
      
      
      
        <label class="md-nav__link" for="__nav_5_4_2_2_10" id="__nav_5_4_2_2_10_label" tabindex="0">
          Reconnect
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_5_4_2_2_10_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_5_4_2_2_10">
          <span class="md-nav__icon md-icon"></span>
          Reconnect
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/reconnect/sc_ws_basic_client_reconnect_i/" class="md-nav__link">
        basic_client_reconnect_i
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/reconnect/sc_ws_basic_client_reconnect_i_w_reestablish/" class="md-nav__link">
        basic_client_reconnect_i_w_reestablish
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/reconnect/sc_ws_basic_client_reconnect_r/" class="md-nav__link">
        basic_client_reconnect_r
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_4_2_2_11" >
      
      
      
        <label class="md-nav__link" for="__nav_5_4_2_2_11" id="__nav_5_4_2_2_11_label" tabindex="0">
          With Meta
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_5_4_2_2_11_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_5_4_2_2_11">
          <span class="md-nav__icon md-icon"></span>
          With Meta
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/with_meta/init_per_group/" class="md-nav__link">
        init_per_group
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/with_meta/sc_ws_deposit/" class="md-nav__link">
        deposit
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/with_meta/sc_ws_remote_call_contract/" class="md-nav__link">
        remote_call_contract
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/with_meta/sc_ws_withdraw/" class="md-nav__link">
        withdraw
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/sc_ws_basic_open_close_server/" class="md-nav__link">
        basic_open_close
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/sc_ws_basic_open_close/" class="md-nav__link">
        basic_open_close_server
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/sc_ws_broken_open_params/" class="md-nav__link">
        broken_open_params
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/sc_ws_close_mutual/" class="md-nav__link">
        close_mutual
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/sc_ws_close_solo/" class="md-nav__link">
        close_solo
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/sc_ws_leave_reconnect/" class="md-nav__link">
        leave_reconnect
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/sc_ws_leave_reestablish/" class="md-nav__link">
        leave_reestablish
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/sc_ws_leave_reestablish_responder_stays/" class="md-nav__link">
        leave_reestablish_responder_stays
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/sc_ws_leave_reestablish_wrong_fsm_id/" class="md-nav__link">
        leave_reestablish_wrong_fsm_id
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/sc_ws_min_depth_is_modifiable/" class="md-nav__link">
        min_depth_is_modifiable
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/sc_ws_min_depth_not_reached_timeout/" class="md-nav__link">
        min_depth_not_reached_timeout
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/sc_ws_opening_ping_pong/" class="md-nav__link">
        opening_ping_pong
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/sc_ws_reconnect_early/" class="md-nav__link">
        reconnect_early
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/sc_ws_slash/" class="md-nav__link">
        slash
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/sc_ws_snapshot_solo/" class="md-nav__link">
        snapshot_solo
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/sc_ws_timeout_open/" class="md-nav__link">
        timeout_open
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/sc_ws_update_with_meta/" class="md-nav__link">
        update_with_meta
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
      
      
      
        <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
          Mining
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Mining
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../STRATUM/" class="md-nav__link">
        Stratum
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../serializations/" class="md-nav__link">
        Serializations
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#terms" class="md-nav__link">
    Terms
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#notation" class="md-nav__link">
    Notation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#goals" class="md-nav__link">
    Goals
  </a>
  
    <nav class="md-nav" aria-label="Goals">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#privacy" class="md-nav__link">
    Privacy
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#security" class="md-nav__link">
    Security
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#speed" class="md-nav__link">
    Speed
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cost" class="md-nav__link">
    Cost
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#channel-types" class="md-nav__link">
    Channel types
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#topology" class="md-nav__link">
    Topology
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#incentives" class="md-nav__link">
    Incentives
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#artefacts" class="md-nav__link">
    Artefacts
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fees" class="md-nav__link">
    Fees
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#protocol" class="md-nav__link">
    Protocol
  </a>
  
    <nav class="md-nav" aria-label="Protocol">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#communication" class="md-nav__link">
    Communication
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    Overview
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#contract-execution" class="md-nav__link">
    Contract execution
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#node-configuration" class="md-nav__link">
    Node configuration
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#light-node-requirements" class="md-nav__link">
    Light node requirements
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#future-work" class="md-nav__link">
    Future Work
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#references" class="md-nav__link">
    References
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  



<h1 id="state-channels">State Channels</h1>
<p>State channels allow entities to communicate with each other with the goal of
collectively computing some function <code>f</code>.
This <code>f</code> can be as simple as "send 0.1 coins every minute" or it could represent
a decentralised exchange. These functions are, in our case, represented by smart
contracts and just like any legal contract, we need an arbiter in case one party
tries to act maliciously. This arbiter is the blockchain.</p>
<ul>
<li>trustless</li>
<li>off chain vs on chain</li>
<li>same guarantees as blockchain</li>
</ul>
<p>Before describing the protocols involved, we are going to introduce some high
level issues, that shaped our state channel design.</p>
<h2 id="terms">Terms</h2>
<p>We try to follow the naming conventions used by the lightning network, wherever
it makes sense, in hope to be able to make it easier for others to adopt,
although we try to enforce a <code>who - what - how</code> rule for naming, e.g.
<code>channel_close_solo</code> as opposed to <code>solo_close_channel</code> or <code>channel_solo_close</code>.</p>
<ul>
<li><strong><em>node</em></strong>: client connected to the blockchain, that can be addressed via an
  IP address and port</li>
<li><strong><em>peer</em></strong>: participant in a channel</li>
<li><strong><em>channel</em></strong>: an off-chain method for two peers to exchange state updates,
  each node can have multiple channels and a pair of nodes can also have
  multiple channels between each other, which should be multiplexed over one
  connection</li>
</ul>
<h2 id="notation">Notation</h2>
<p>All objects on the blockchain have a type and are uniquely addressable. We will
denote this by <code>Type(Id)</code>, e.g. <code>Account(A)</code> is the account at address <code>A</code>. If
we then want to get the balance of that account we use <code>Account(A).balance</code>.</p>
<h2 id="goals">Goals</h2>
<ul>
<li>generic solution that supports all smart contracts<ul>
<li>even better if one state channel is generic, s.t. it can be instantiated and
  then be used for many different contracts</li>
</ul>
</li>
<li>composability of channels, i.e. an application works for the
  A &lt;-&gt; B case should also work in the A &lt;-B-&gt; C (A to C via B) case</li>
<li>upgradeable without having to close/re-open the channel</li>
<li>the previous should enable state channels to be long lived<ul>
<li>this is at odds with privacy</li>
</ul>
</li>
<li>on chain operations should be kept to a minimum</li>
<li>participants state should also be kept to a minimum, i.e. O(log n) or better
  constant multiplier</li>
<li>trust-less to a degree with blockchain as the arbiter</li>
<li>any party involved can close a channel, but it should be discouraged</li>
</ul>
<p>Generally, an ideal state channel design should be a strict improvement over
handling interactions on chain. The dimensions we are going to use to measure
improvements are as follows:</p>
<ul>
<li>Privacy</li>
<li>Security</li>
<li>Speed</li>
<li>Cost</li>
</ul>
<h3 id="privacy">Privacy</h3>
<p>On-chain interactions offer little to no privacy, since we currently make no
efforts to hide interacting parties or the nature of their interactions.</p>
<p>State channels, at the least, reveal that two parties establish a channel and
the amount of coins they commit to the channel, which is no improvement.
In the case that neither party tries to cheat, the exact nature of their
interactions stays unrevealed, since a mutual closing of a channel does not
require publishing of any state.</p>
<p>With that in mind, state channels offer a slight improvement in privacy.</p>
<h3 id="security">Security</h3>
<p>State channels offer almost the same security guarantees as normal on-chain
transactions.</p>
<ul>
<li><strong><em>Liveness</em></strong>: both peers can independently initiate closing of a channel and
  that operation is then processed by the blockchain with the usual assumptions
  of liveness.</li>
<li><strong><em>Trust-less</em></strong>: since operations need to be signed by both peers and they
  sign operations based on their view of the state, both parties will only
  sign operations they agree on and don't need to trust the other peer.</li>
</ul>
<p>Thus security is on par.</p>
<h3 id="speed">Speed</h3>
<p>Opening a state channel incurs the normal on-chain latency but after the channel
has been established, operations can be executed as fast as both peers can
process them, which should be a major improvement over on-chain interactions.</p>
<h3 id="cost">Cost</h3>
<p>Using state channels requires at least two on-chain transactions, for opening
and closing them. Once a channel is established, no further on-chain
transactions are needed unless a peer wants to withdraw or deposit funds. Even
in the case of an one off transaction, it still might be worth opening a channel
if one already has other open channels and thus might stand to gain fees by
relaying messages.</p>
<h2 id="channel-types">Channel types</h2>
<p>The most generic kind of channel would be one that lets peers instantiate any
arbitrary smart contract within the channel and does not restrict the number of
peers that can participate in such a channel.</p>
<p>Our construction will try to meet the former property, allowing any number of
arbitrary smart contracts to be executed in the channel, but restrict the latter
to two peers per channel. This restriction is mostly to keep the channel
construction simple. It is certainly possible to have more than two participants
per channel, requiring all of them to sign off every update, but it would incur
a big overhead and lead to an increased likelihood of a channel getting stuck,
whenever a peer stops responding. There are methods to avoid the liveness issue
but at that point it becomes unclear if we are still operating a state channel
or already dealing with a side-chain.</p>
<p>With that in mind, the two peers in a channel will most likely not have the
same roles but instead end up in a client-server arrangement for the majority of
channels, where a client is using a service offered by the server, which is
highly available and probably also some well known entity, mirroring the status
quo of the current web.
A popular example would be an exchange, where users connect to an exchange via
state channels. This would process would be trustless, since exchanges can not
lose funds, that haven't been signed over to them</p>
<h2 id="topology">Topology</h2>
<p>It is still very much unclear, what the topology of a widely used channel
network would look like but it seems that a hub and spoke model would be the
most probable. This model seems more likely than a decentralised one because the
majority of users would not be able to offer reliable services, longer paths
through the network would lock up significantly more funds and ostensibly also
incur a higher forwarding fee.</p>
<p>In the hub and spoke model, we would have a number of big hubs, which would be
involved in most routes through the network. These hubs would be tightly
connected and offer highly available and short paths for most users. In turn,
this would lead to a loss of privacy and making the network more fragile, since
the disappearance of one of these hubs would have a big impact on its overall
connectedness.</p>
<h2 id="incentives">Incentives</h2>
<p>Operating a channel takes at least two on-chain operations and therefore has a
base amount of fees is required and this fact could be abused by a malicious
peer. Since closing a channel incurs a fee, they could open a channel with
someone and subsequently refuse to cooperate, locking up coins and making the
other party pay the fees required to close the channel again.</p>
<p>Once a channel has been opened, all operations happening within need to be
signed off by all participants. This creates a free option for whoever is
signing off an update last. This problem is remedied by the ability to enforce
progress on chain, that is taking the state from the channel and have miners
execute the contract call, that other party wasn't willing to sign off.</p>
<p>With that in mind, it is advised for users to be cautious with whom they open
channels if they want to avoid the above issues.</p>
<p>On the other hand, attributing every failure in a channel to malice would also
be detrimental and cause both a loss of trust in the system and users to spend
more on fees than they should.</p>
<h2 id="artefacts">Artefacts</h2>
<p>What should the outcome of a state channel be? The simplest answer would be a
change in on-chain balances of participants but it could also be desirable to
use state channels as a poor man's MPC and have a contract with a non-empty
state as the result on chain, which would, ideally, require a compact proof,
that the given smart contract actually produced the state provided by the
participants.</p>
<h2 id="fees">Fees</h2>
<p>If we consider state channels to be long lived objects, then problems can arise
around the handling of fees, that need to be paid for on chain transactions.</p>
<p>Given that all parties need to sign off everything, a malicious party could
potentially black mail a peer under some circumstances.
If fees come from the channel balance, then one might end up in situations,
where the channel balance is lower than the fee required for miners to pick up
the transaction. The upshot here is, that the black mailed peer would lose less
coins than the cost of an on chain transaction, which should not be a lot.
If the fee instead comes from the account sending the transaction, then that
account might end up without enough coins and thus possibly end up with
insufficient funds to close the channel. This could potentially be worse since
the channel might hold significant funds.</p>
<p>Under these circumstances it seems deducting fees directly from the channel
balance as part of its closing seems like the most sensible approach.</p>
<p>To avoid this situation, a peer should consider halting any interactions if
on-chain fees reach a point, where the fees required to close a channel in a
timely manner approach the balance of the channel.</p>
<h2 id="protocol">Protocol</h2>
<p>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD",
"SHOULD NOT", "RECOMMENDED",  "MAY", and "OPTIONAL" in this document are to be
interpreted as described in <a href="https://tools.ietf.org/html/rfc2119">RFC 2119</a>.</p>
<h3 id="communication">Communication</h3>
<p>Communication between participants of a channel is peer to peer and SHOULD
happen via a reliable and ordered protocol, e.g. TCP. Peers should expect to be
running their own node, in order to be able to catch transactions relevant to
the channels they are involved in, although outsourcing that job to a third
party, while still being trustless, might be possible in the future.</p>
<p>Participating in a state channel requires two nodes to be able to communicate
with each other. Throughout this document we are going to assume that this
happens via TCP/IP. The process of discovering the <code>IP_ADDR:PORT</code> pair of a
remote node is not covered in this document and assumed to happen out of band,
unless both of them are already part of a state channel network, where nodes
can announce their identities <code>(IP_ADDR, PORT, ID)</code>.</p>
<p>Messages will be sent both on- and off-chain.</p>
<p>Off-chain communication MUST be encrypted. To satisfy this, we use the same
transport protocol used for sync, which offers encryption and authentication and
is based on the Noise protocol.</p>
<p>Each pair of nodes SHOULD have at most one open connection. Channels can be
multiplexed easily, given that each channel has a unique id, so re-using
connections does not pose any problems.</p>
<h3 id="overview">Overview</h3>
<p>The following diagram should give an overview of the off-chain state machine.
The starting point for any channel is the <code>closed</code> state.</p>
<div class="highlight"><pre><span></span><code>+---+ channel_open                                                         +---+
|   | -------------&gt; +-------------+                 error                 |   |
|   |                | initialized | ------------------------------------&gt; |   |
|   | &lt;------------- +-------------+                                       |   |
|   |   [timeout]/          | channel_accept                               |   |
|   |   [disconnect]        v                                              |   |
|   |                +-------------+                 error                 |   |
|   | &lt;------------- |  accepted   | ------------------------------------&gt; |   |
| c |   [timeout]/   +-------------+                                       | e |
| l |   [disconnect]        | funding_created                              | r |
| o |                       v                                              | r |
| s |                +-------------+                 error                 | o |
| e | &lt;------------- | half_signed | ------------------------------------&gt; | r |
| d |   [timeout]/   +-------------+                                       |   |
|   |   [disconnect]        | funding_signed                               |   |
|   |                       v                                              |   |
|   |                +-------------+  [disconnect]                         |   |
|   | &lt;------------- |   signed    | -------------+  error                 |   |
|   |   [timeout]    +-------------+ -------------|----------------------&gt; |   |
|   |                       |    |  shutdown      |                        |   |
|   |        funding_locked |    +------------+   |                        |   |
|   |                       |                 |   |                        |   |
|   |                       |                 |   v                        |   |
|   |                       v        [disconnect] +--------------+  error  |   |
|   |                +-------------+ ---------|-&gt; | disconnected | ------&gt; |   |
|   | &lt;------------- |    open     |          |   +--------------+         |   |
|   |   [timeout]    +-------------+ &lt;--------|------------+               |   |
|   |                 ^ |      |       channel_reestablish                 |   |
|   |       update_*/ | |      |              |                            |   |
|   |       ping/pong +-+      | shutdown     v                            |   |
|   |                          |    +-------------+ [disconnect]           |   |
|   |                          +--&gt; |   closing   | ------------+          |   |
|   |                               +-------------+             |          |   |
|   |                                |  ^                       |          |   |
|   |                                |  | channel_reestablish   |          |   |
|   | &lt;------------------------------+  |                       v          |   |
|   |       closing_signed              |         +--------------+  error  |   |
|   |                                   +-------- | disconnected | ------&gt; |   |
+---+                                             +--------------+         +---+
  ^                                                                          |
  |                                                                          |
  +--------------------------------------------------------------------------+
</code></pre></div>
<p><strong><em>Note</em></strong>: Terms in square brackets <code>[]</code> are not explicit messages defined by
the protocol but part of the underlying transport protocol.</p>
<p>On-chain</p>
<div class="highlight"><pre><span></span><code>+---+           channel_create
|   | --------------------------------&gt; +--------------+
|   |                                   |     open     |
|   | &lt;-------------------------------- +--------------+
|   |         channel_close_mutual             |    ^ |   channel_withdraw/
|   |                                          |    | | channel_snapshot_solo/
|   |                       channel_close_solo |    | |   channel_deposit/
|   |                                          |    | | channel_force_progress
|   |                                          |    | |
| c |                                          |    | |
| l | channel_close_mutual                     |    +-+
| o | &lt;------------------- +--------------+    |
| s |                      |    closing   |    |
| e | &lt;------------------- +--------------+    |
| d |    channel_settle      |          ^      |
|   |                        |          |      |
|   |         channel_slash/ |   [lock_timeout]|
|   |  channel_force_progress|          |      |
|   |                        |          |      |
|   |                        v          |      |
|   | channel_close_mutual +--------------+    |
|   | &lt;------------------- |    locked    | &lt;--+
|   |                      +--------------+
+---+                       | ^
                            | |
                      channel_slash/
                  channel_force_progress
                            | |
                            +-+
</code></pre></div>
<p><strong><em>Note</em></strong>: <code>[lock_timeout]</code> is not an explicit message of the protocol but the
expiration of a timer.</p>
<h3 id="contract-execution">Contract execution</h3>
<p>Off-chain contract life cycle closely represents the on-chain one. A contract
is created via a co-signed off-chain transaction. Once this is done, the new
contract can be called by both channel participants. Each contract has its own
state and balance, which can be modified by contract calls.
Contract calls are purged on every round. If the last round contained a call,
it would be part of the calls tree, and otherwise the tree will be empty.
Different client implementations can keep old calls in order for participants
to be able to inspect their return values but this is not part of the protocol.
Participants can remove an off-chain contracts from a channel's state tree and
redistribute its balance amongst them.</p>
<p>Each participant of a state channels keeps a state tree representing the
internal channel's state. This tree consists of accounts, contracts and
contract calls. Although this tree is internal to the channel, during dispute
resolution, part of it is posted on-chain in order to use the blockchain as an
arbiter. Despite the contract being internal in most cases, it is not in all
cases. The privacy could be further improved.</p>
<p>Contract call execution relies on both participants agreeing on a state update.
At any point a participant can be missing or refusing to cooperate to a valid
off-chain contract call. We call this a dispute and it can be resolved using
forcing of progress on-chain. This requires the forcing party to provide enough
information for the contract's execution. The result of a successful force
progress is a new channel off-chain state. This way we keep contracts in
channels trustless.</p>
<h2 id="node-configuration">Node configuration</h2>
<p>æternity nodes are prepared to service state channels via a JSON-RPC API over WebSocket.</p>
<p>The following configuration values control the support for state channels:</p>
<ul>
<li><code>websocket.port</code> - The listen port for the state channels API. No default, meaning that the WebSocket API is unavailable by default.</li>
<li><code>websocket.listen_address</code> - The listen address for the WebSocket API. Default: <code>127.0.0.1</code>, meaning that only local connections are allowed.</li>
<li><code>websocket.acceptors</code> - The number of concurrent socket acceptors (default: <code>10</code>). This is mainly an optimization, since the node can service requests at good speed even with one acceptor.</li>
<li><code>channels.max_count</code> - The maximum number of concurrently active state channel clients served by the node (default: <code>1000</code>). The limit checking will currently not be applied to channels being reestablished, as the node has already agreed to service them.</li>
</ul>
<h2 id="light-node-requirements">Light node requirements</h2>
<h2 id="future-work">Future Work</h2>
<h2 id="references">References</h2>
<p>[1]: Lightning Network RFC: https://github.com/lightningnetwork/lightning-rfc</p>
<p>[2]: Miller, Andrew, et al. "Sprites and State Channels: Payment Networks that Go Faster than Lightning."</p>
<p>[3]: Malavolta, Giulio, et al. "Concurrency and privacy with payment-channel networks." Proceedings of the 2017 ACM SIGSAC Conference on Computer and Communications Security. ACM, 2017.</p>
<p>[4]: Dziembowski, Stefan, et al. PERUN: Virtual Payment Channels over Cryptographic Currencies⋆. IACR Cryptology ePrint Archive, 2017: 635, 2017.</p>
<p>[5]: Roos, Stefanie, et al. "Settling Payments Fast and Private: Efficient Decentralized Routing for Path-Based Transactions." arXiv preprint arXiv:1709.05748 (2017).</p>
<p>[6]: Tremback, Jehan, and Zack Hess. "Universal payment channels." (2015).</p>





                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "..", "features": ["content.tabs.link", "search.highlight", "search.share", "search.suggest"], "search": "../assets/javascripts/workers/search.db81ec45.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.a00a7c5e.min.js"></script>
      
    
  </body>
</html>