
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      <link rel="icon" href="../favicon.png">
      <meta name="generator" content="mkdocs-1.2.1, mkdocs-material-7.1.9">
    
    
      
        <title>General - æternity Protocol</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.ca7ac06f.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.f1a3b89f.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
      
    
    
    
    
      


    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="pink" data-md-color-accent="pink">
  
    
    <script>function __prefix(e){return new URL("..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
      <script>var palette=__get("__palette");if(null!==palette&&"object"==typeof palette.color)for(var key in palette.color)document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#ternity-consensus-protocol" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../index.html" title="æternity Protocol" class="md-header__button md-logo" aria-label="æternity Protocol" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            æternity Protocol
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              General
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="pink" data-md-color-accent="pink"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31z"/></svg>
            </label>
          
        
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="pink" data-md-color-accent="pink"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        
<a href="https://github.com/aeternity/protocol/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../index.html" title="æternity Protocol" class="md-nav__button md-logo" aria-label="æternity Protocol" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    æternity Protocol
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/aeternity/protocol/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../index.html" class="md-nav__link">
        Introduction
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      <label class="md-nav__link" for="__nav_2">
        Communication
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Communication" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Communication
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../GOSSIP.html" class="md-nav__link">
        Gossip
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../sync/index.html" class="md-nav__link">
        Sync
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" checked>
      
      <label class="md-nav__link" for="__nav_3">
        Consensus
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Consensus" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Consensus
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          General
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="index.html" class="md-nav__link md-nav__link--active">
        General
      </a>
      
        
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    Introduction
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#notation" class="md-nav__link">
    Notation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    Overview
  </a>
  
    <nav class="md-nav" aria-label="Overview">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#blockchain" class="md-nav__link">
    Blockchain
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#blocks" class="md-nav__link">
    Blocks
  </a>
  
    <nav class="md-nav" aria-label="Blocks">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#genesis-block" class="md-nav__link">
    Genesis block
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#transactions" class="md-nav__link">
    Transactions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#transaction-signature" class="md-nav__link">
    Transaction signature
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#proof-of-work" class="md-nav__link">
    Proof of Work
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accounts" class="md-nav__link">
    Accounts
  </a>
  
    <nav class="md-nav" aria-label="Accounts">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#basic-or-plain-old-account" class="md-nav__link">
    Basic (or plain old) account
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#account-associated-to-a-contract" class="md-nav__link">
    Account associated to a contract
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#generic-account" class="md-nav__link">
    Generic account
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#p2p-network" class="md-nav__link">
    P2P network
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#coins-and-tokens" class="md-nav__link">
    Coins and tokens
  </a>
  
    <nav class="md-nav" aria-label="Coins and tokens">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ternity-tokens" class="md-nav__link">
    æternity tokens
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#specification" class="md-nav__link">
    Specification
  </a>
  
    <nav class="md-nav" aria-label="Specification">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#crypto" class="md-nav__link">
    Crypto
  </a>
  
    <nav class="md-nav" aria-label="Crypto">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#keys" class="md-nav__link">
    Keys
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#signatures" class="md-nav__link">
    Signatures
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#blocks_1" class="md-nav__link">
    Blocks
  </a>
  
    <nav class="md-nav" aria-label="Blocks">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#consensus-protocol-versions" class="md-nav__link">
    Consensus protocol versions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#key-blocks" class="md-nav__link">
    Key Blocks
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#micro-blocks" class="md-nav__link">
    Micro Blocks
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#transactions_1" class="md-nav__link">
    Transactions
  </a>
  
    <nav class="md-nav" aria-label="Transactions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#authorization-transactions" class="md-nav__link">
    Authorization transactions
  </a>
  
    <nav class="md-nav" aria-label="Authorization transactions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#signed-transaction" class="md-nav__link">
    Signed transaction
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#generic-account-meta-transaction" class="md-nav__link">
    Generic account meta transaction
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#common-fields-for-transactions" class="md-nav__link">
    Common fields for transactions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#spend-transaction" class="md-nav__link">
    Spend transaction
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#payingfor-transaction" class="md-nav__link">
    PayingFor transaction
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#contract-transactions" class="md-nav__link">
    Contract transactions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#oracle-transactions" class="md-nav__link">
    Oracle transactions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#naming-system-transactions" class="md-nav__link">
    Naming system transactions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#channel-transactions" class="md-nav__link">
    Channel transactions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#generalized-account-attach-transation" class="md-nav__link">
    Generalized account attach transation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gas" class="md-nav__link">
    Gas
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#proof-of-work_1" class="md-nav__link">
    Proof of Work
  </a>
  
    <nav class="md-nav" aria-label="Proof of Work">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#solution-encoding-rules" class="md-nav__link">
    Solution Encoding Rules
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#difficulty-target" class="md-nav__link">
    Difficulty target
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#target-adjustment" class="md-nav__link">
    Target adjustment
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="bitcoin-ng.html" class="md-nav__link">
        Bitcoin-NG
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="coinbase.html" class="md-nav__link">
        Coinbase
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="locking.html" class="md-nav__link">
        Locking
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      <label class="md-nav__link" for="__nav_4">
        Features
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Features" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Features
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../generalized_accounts/index.html" class="md-nav__link">
        Generalized Accounts
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../AENS.html" class="md-nav__link">
        Naming System
      </a>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_3" type="checkbox" id="__nav_4_3" >
      
      <label class="md-nav__link" for="__nav_4_3">
        Oracles
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Oracles" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_3">
          <span class="md-nav__icon md-icon"></span>
          Oracles
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../oracles/index.html" class="md-nav__link">
        General
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../oracles/oracle_life_cycle.html" class="md-nav__link">
        Lifecycle Examples
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../oracles/oracle_state_tree.html" class="md-nav__link">
        State Tree
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../oracles/oracle_transactions.html" class="md-nav__link">
        Transactions
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_4" type="checkbox" id="__nav_4_4" >
      
      <label class="md-nav__link" for="__nav_4_4">
        Smart Contracts
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Smart Contracts" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_4">
          <span class="md-nav__icon md-icon"></span>
          Smart Contracts
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../contracts/index.html" class="md-nav__link">
        General
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../contracts/events.html" class="md-nav__link">
        Events
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../contracts/contract_transactions.html" class="md-nav__link">
        Transaction Types
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../contracts/contract_state_tree.html" class="md-nav__link">
        State Tree
      </a>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_4_5" type="checkbox" id="__nav_4_4_5" >
      
      <label class="md-nav__link" for="__nav_4_4_5">
        Virtual Machines
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Virtual Machines" data-md-level="3">
        <label class="md-nav__title" for="__nav_4_4_5">
          <span class="md-nav__icon md-icon"></span>
          Virtual Machines
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../contracts/contract_vms.html" class="md-nav__link">
        General
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../contracts/aevm.html" class="md-nav__link">
        AEVM
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../contracts/fate.html" class="md-nav__link">
        FATE VM
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_5" type="checkbox" id="__nav_4_5" >
      
      <label class="md-nav__link" for="__nav_4_5">
        State Channels
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="State Channels" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_5">
          <span class="md-nav__icon md-icon"></span>
          State Channels
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../channels/index.html" class="md-nav__link">
        General
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../channels/ON-CHAIN.html" class="md-nav__link">
        On-Chain Actions
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../channels/OFF-CHAIN.html" class="md-nav__link">
        Off-Chain Actions
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../channels/state.html" class="md-nav__link">
        Off-Chain State
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      <label class="md-nav__link" for="__nav_5">
        Node API
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Node API" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Node API
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/index.html" class="md-nav__link">
        General
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/api_encoding.html" class="md-nav__link">
        Encoding
      </a>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_3" type="checkbox" id="__nav_5_3" >
      
      <label class="md-nav__link" for="__nav_5_3">
        API Usage
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="API Usage" data-md-level="2">
        <label class="md-nav__title" for="__nav_5_3">
          <span class="md-nav__icon md-icon"></span>
          API Usage
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/account_api_usage.html" class="md-nav__link">
        Account API
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/channels_api_usage.html" class="md-nav__link">
        Channels API
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/contract_api_usage.html" class="md-nav__link">
        Contract API
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/mining_api_usage.html" class="md-nav__link">
        Mining API
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/naming_system_api_usage.html" class="md-nav__link">
        Naming System API
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/oracle_api_usage.html" class="md-nav__link">
        Oracle API
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/spend_api_usage.html" class="md-nav__link">
        Spend API
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_4" type="checkbox" id="__nav_5_4" >
      
      <label class="md-nav__link" for="__nav_5_4">
        State Channels
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="State Channels" data-md-level="2">
        <label class="md-nav__title" for="__nav_5_4">
          <span class="md-nav__icon md-icon"></span>
          State Channels
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/channel_ws_api.html" class="md-nav__link">
        WebSocket API
      </a>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_4_2" type="checkbox" id="__nav_5_4_2" >
      
      <label class="md-nav__link" for="__nav_5_4_2">
        Examples
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Examples" data-md-level="3">
        <label class="md-nav__title" for="__nav_5_4_2">
          <span class="md-nav__icon md-icon"></span>
          Examples
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/index.html" class="md-nav__link">
        General
      </a>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_4_2_2" type="checkbox" id="__nav_5_4_2_2" >
      
      <label class="md-nav__link" for="__nav_5_4_2_2">
        JSON-RPC
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="JSON-RPC" data-md-level="4">
        <label class="md-nav__title" for="__nav_5_4_2_2">
          <span class="md-nav__icon md-icon"></span>
          JSON-RPC
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_4_2_2_1" type="checkbox" id="__nav_5_4_2_2_1" >
      
      <label class="md-nav__link" for="__nav_5_4_2_2_1">
        Abort Updates
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Abort Updates" data-md-level="5">
        <label class="md-nav__title" for="__nav_5_4_2_2_1">
          <span class="md-nav__icon md-icon"></span>
          Abort Updates
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/abort_updates/sc_ws_abort_deposit.html" class="md-nav__link">
        abort_deposit
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/abort_updates/sc_ws_abort_offchain_update.html" class="md-nav__link">
        abort_offchain_update
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/abort_updates/sc_ws_abort_settle.html" class="md-nav__link">
        abort_settle
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/abort_updates/sc_ws_abort_shutdown.html" class="md-nav__link">
        abort_shutdown
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/abort_updates/sc_ws_abort_slash.html" class="md-nav__link">
        abort_slash
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/abort_updates/sc_ws_abort_snapshot_solo.html" class="md-nav__link">
        abort_snapshot_solo
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/abort_updates/sc_ws_abort_withdraw.html" class="md-nav__link">
        abort_withdraw
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/abort_updates/sc_ws_can_not_abort_while_open.html" class="md-nav__link">
        can_not_abort_while_open
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_4_2_2_2" type="checkbox" id="__nav_5_4_2_2_2" >
      
      <label class="md-nav__link" for="__nav_5_4_2_2_2">
        Assume Min Depth
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Assume Min Depth" data-md-level="5">
        <label class="md-nav__title" for="__nav_5_4_2_2_2">
          <span class="md-nav__icon md-icon"></span>
          Assume Min Depth
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/assume_min_depth/sc_ws_basic_open_close.html" class="md-nav__link">
        basic_open_close
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_4_2_2_3" type="checkbox" id="__nav_5_4_2_2_3" >
      
      <label class="md-nav__link" for="__nav_5_4_2_2_3">
        Both Sign
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Both Sign" data-md-level="5">
        <label class="md-nav__title" for="__nav_5_4_2_2_3">
          <span class="md-nav__icon md-icon"></span>
          Both Sign
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/both_sign/init_per_group.html" class="md-nav__link">
        init_per_group
      </a>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_4_2_2_3_2" type="checkbox" id="__nav_5_4_2_2_3_2" >
      
      <label class="md-nav__link" for="__nav_5_4_2_2_3_2">
        conflicts
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="conflicts" data-md-level="6">
        <label class="md-nav__title" for="__nav_5_4_2_2_3_2">
          <span class="md-nav__icon md-icon"></span>
          conflicts
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/both_sign/conflicts/sc_ws_conflict_deposit_and_offchain_update.html" class="md-nav__link">
        conflict_deposit_and_offchain_update
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/both_sign/conflicts/sc_ws_conflict_two_deposits.html" class="md-nav__link">
        conflict_two_deposits
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/both_sign/conflicts/sc_ws_conflict_two_offchain_updates.html" class="md-nav__link">
        conflict_two_offchain_updates
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/both_sign/conflicts/sc_ws_conflict_two_withdrawals.html" class="md-nav__link">
        conflict_two_withdrawals
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/both_sign/conflicts/sc_ws_conflict_withdrawal_and_deposit.html" class="md-nav__link">
        conflict_withdrawal_and_deposit
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/both_sign/conflicts/sc_ws_conflict_withdrawal_and_offchain_update.html" class="md-nav__link">
        conflict_withdrawal_and_offchain_update
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_4_2_2_4" type="checkbox" id="__nav_5_4_2_2_4" >
      
      <label class="md-nav__link" for="__nav_5_4_2_2_4">
        Changeable Fee
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Changeable Fee" data-md-level="5">
        <label class="md-nav__title" for="__nav_5_4_2_2_4">
          <span class="md-nav__icon md-icon"></span>
          Changeable Fee
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/changeable_fee/sc_ws_set_fee_close_mutual.html" class="md-nav__link">
        set_fee_close_mutual
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/changeable_fee/sc_ws_set_fee_close_solo.html" class="md-nav__link">
        set_fee_close_solo
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/changeable_fee/sc_ws_set_fee_create.html" class="md-nav__link">
        set_fee_create
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/changeable_fee/sc_ws_set_fee_deposit.html" class="md-nav__link">
        set_fee_deposit
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/changeable_fee/sc_ws_set_fee_settle.html" class="md-nav__link">
        set_fee_settle
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/changeable_fee/sc_ws_set_fee_slash.html" class="md-nav__link">
        set_fee_slash
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/changeable_fee/sc_ws_set_fee_snapshot.html" class="md-nav__link">
        set_fee_snapshot
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/changeable_fee/sc_ws_set_fee_withdrawal.html" class="md-nav__link">
        set_fee_withdrawal
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_4_2_2_5" type="checkbox" id="__nav_5_4_2_2_5" >
      
      <label class="md-nav__link" for="__nav_5_4_2_2_5">
        Continuous
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Continuous" data-md-level="5">
        <label class="md-nav__title" for="__nav_5_4_2_2_5">
          <span class="md-nav__icon md-icon"></span>
          Continuous
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/continuous/init_per_group.html" class="md-nav__link">
        init_per_group
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/continuous/sc_ws_deposit.html" class="md-nav__link">
        deposit
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/continuous/sc_ws_failed_update.html" class="md-nav__link">
        failed_update
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/continuous/sc_ws_generic_messages.html" class="md-nav__link">
        generic_messages
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/continuous/sc_ws_ping_pong.html" class="md-nav__link">
        ping_pong
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/continuous/sc_ws_update_conflict.html" class="md-nav__link">
        update_conflict
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/continuous/sc_ws_withdraw.html" class="md-nav__link">
        withdraw
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_4_2_2_6" type="checkbox" id="__nav_5_4_2_2_6" >
      
      <label class="md-nav__link" for="__nav_5_4_2_2_6">
        Contracts
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Contracts" data-md-level="5">
        <label class="md-nav__title" for="__nav_5_4_2_2_6">
          <span class="md-nav__icon md-icon"></span>
          Contracts
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/contracts/init_per_group.html" class="md-nav__link">
        init_per_group
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/contracts/sc_ws_basic_contracts.html" class="md-nav__link">
        basic_contract
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/contracts/sc_ws_environment_contract.html" class="md-nav__link">
        environment_contract
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/contracts/sc_ws_nameservice_contract.html" class="md-nav__link">
        nameservice_contract
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/contracts/sc_ws_oracle_contract.html" class="md-nav__link">
        oracle_contract
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/contracts/sc_ws_remote_call_contract.html" class="md-nav__link">
        remote_call_contract
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/contracts/sc_ws_remote_call_contract_refering_onchain_data.html" class="md-nav__link">
        remote_call_contract_refering_onchain_data
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/contracts/sc_ws_wrong_call_data.html" class="md-nav__link">
        wrong_call_data
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_4_2_2_7" type="checkbox" id="__nav_5_4_2_2_7" >
      
      <label class="md-nav__link" for="__nav_5_4_2_2_7">
        Force Progress
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Force Progress" data-md-level="5">
        <label class="md-nav__title" for="__nav_5_4_2_2_7">
          <span class="md-nav__icon md-icon"></span>
          Force Progress
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/force_progress/sc_ws_force_progress_based_on_offchain_state.html" class="md-nav__link">
        force_progress_based_on_offchain_state
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/force_progress/sc_ws_force_progress_based_on_onchain_state.html" class="md-nav__link">
        force_progress_based_on_onchain_state
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_4_2_2_8" type="checkbox" id="__nav_5_4_2_2_8" >
      
      <label class="md-nav__link" for="__nav_5_4_2_2_8">
        Generalized Accounts
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Generalized Accounts" data-md-level="5">
        <label class="md-nav__title" for="__nav_5_4_2_2_8">
          <span class="md-nav__icon md-icon"></span>
          Generalized Accounts
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_4_2_2_8_1" type="checkbox" id="__nav_5_4_2_2_8_1" >
      
      <label class="md-nav__link" for="__nav_5_4_2_2_8_1">
        both
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="both" data-md-level="6">
        <label class="md-nav__title" for="__nav_5_4_2_2_8_1">
          <span class="md-nav__icon md-icon"></span>
          both
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/generalized_accounts/both/sc_ws_basic_open_close.html" class="md-nav__link">
        basic_open_close
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_4_2_2_8_2" type="checkbox" id="__nav_5_4_2_2_8_2" >
      
      <label class="md-nav__link" for="__nav_5_4_2_2_8_2">
        initiator
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="initiator" data-md-level="6">
        <label class="md-nav__title" for="__nav_5_4_2_2_8_2">
          <span class="md-nav__icon md-icon"></span>
          initiator
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/generalized_accounts/initiator/sc_ws_basic_open_close.html" class="md-nav__link">
        basic_open_close
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_4_2_2_8_3" type="checkbox" id="__nav_5_4_2_2_8_3" >
      
      <label class="md-nav__link" for="__nav_5_4_2_2_8_3">
        responder
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="responder" data-md-level="6">
        <label class="md-nav__title" for="__nav_5_4_2_2_8_3">
          <span class="md-nav__icon md-icon"></span>
          responder
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/generalized_accounts/responder/sc_ws_basic_open_close.html" class="md-nav__link">
        basic_open_close
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_4_2_2_9" type="checkbox" id="__nav_5_4_2_2_9" >
      
      <label class="md-nav__link" for="__nav_5_4_2_2_9">
        Only One Signs
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Only One Signs" data-md-level="5">
        <label class="md-nav__title" for="__nav_5_4_2_2_9">
          <span class="md-nav__icon md-icon"></span>
          Only One Signs
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/only_one_signs/init_per_group.html" class="md-nav__link">
        init_per_group
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/only_one_signs/sc_ws_conflict_on_new_offchain.html" class="md-nav__link">
        conflict_on_new_offchain
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/only_one_signs/sc_ws_conflict_snapshot_and_offchain_update.html" class="md-nav__link">
        sc_ws_conflict_snapshot_and_offchain_update
      </a>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_4_2_2_9_4" type="checkbox" id="__nav_5_4_2_2_9_4" >
      
      <label class="md-nav__link" for="__nav_5_4_2_2_9_4">
        conflicts
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="conflicts" data-md-level="6">
        <label class="md-nav__title" for="__nav_5_4_2_2_9_4">
          <span class="md-nav__icon md-icon"></span>
          conflicts
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/only_one_signs/conflicts/sc_ws_conflict_deposit_and_offchain_update.html" class="md-nav__link">
        conflict_deposit_and_offchain_update
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/only_one_signs/conflicts/sc_ws_conflict_two_deposits.html" class="md-nav__link">
        conflict_two_deposits
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/only_one_signs/conflicts/sc_ws_conflict_two_offchain_updates.html" class="md-nav__link">
        conflict_two_offchain_updates
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/only_one_signs/conflicts/sc_ws_conflict_two_withdrawals.html" class="md-nav__link">
        conflict_two_withdrawals
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/only_one_signs/conflicts/sc_ws_conflict_withdrawal_and_deposit.html" class="md-nav__link">
        conflict_withdrawal_and_deposit
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/only_one_signs/conflicts/sc_ws_conflict_withdrawal_and_offchain_update.html" class="md-nav__link">
        conflict_withdrawal_and_offchain_update
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_4_2_2_10" type="checkbox" id="__nav_5_4_2_2_10" >
      
      <label class="md-nav__link" for="__nav_5_4_2_2_10">
        Reconnect
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Reconnect" data-md-level="5">
        <label class="md-nav__title" for="__nav_5_4_2_2_10">
          <span class="md-nav__icon md-icon"></span>
          Reconnect
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/reconnect/sc_ws_basic_client_reconnect_i.html" class="md-nav__link">
        basic_client_reconnect_i
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/reconnect/sc_ws_basic_client_reconnect_i_w_reestablish.html" class="md-nav__link">
        basic_client_reconnect_i_w_reestablish
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/reconnect/sc_ws_basic_client_reconnect_r.html" class="md-nav__link">
        basic_client_reconnect_r
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_4_2_2_11" type="checkbox" id="__nav_5_4_2_2_11" >
      
      <label class="md-nav__link" for="__nav_5_4_2_2_11">
        With Meta
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="With Meta" data-md-level="5">
        <label class="md-nav__title" for="__nav_5_4_2_2_11">
          <span class="md-nav__icon md-icon"></span>
          With Meta
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/with_meta/init_per_group.html" class="md-nav__link">
        init_per_group
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/with_meta/sc_ws_deposit.html" class="md-nav__link">
        deposit
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/with_meta/sc_ws_remote_call_contract.html" class="md-nav__link">
        remote_call_contract
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/with_meta/sc_ws_withdraw.html" class="md-nav__link">
        withdraw
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/sc_ws_basic_open_close_server.html" class="md-nav__link">
        basic_open_close
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/sc_ws_basic_open_close.html" class="md-nav__link">
        basic_open_close_server
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/sc_ws_broken_open_params.html" class="md-nav__link">
        broken_open_params
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/sc_ws_close_mutual.html" class="md-nav__link">
        close_mutual
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/sc_ws_close_solo.html" class="md-nav__link">
        close_solo
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/sc_ws_leave_reconnect.html" class="md-nav__link">
        leave_reconnect
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/sc_ws_leave_reestablish.html" class="md-nav__link">
        leave_reestablish
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/sc_ws_leave_reestablish_responder_stays.html" class="md-nav__link">
        leave_reestablish_responder_stays
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/sc_ws_leave_reestablish_wrong_fsm_id.html" class="md-nav__link">
        leave_reestablish_wrong_fsm_id
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/sc_ws_min_depth_is_modifiable.html" class="md-nav__link">
        min_depth_is_modifiable
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/sc_ws_min_depth_not_reached_timeout.html" class="md-nav__link">
        min_depth_not_reached_timeout
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/sc_ws_opening_ping_pong.html" class="md-nav__link">
        opening_ping_pong
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/sc_ws_reconnect_early.html" class="md-nav__link">
        reconnect_early
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/sc_ws_slash.html" class="md-nav__link">
        slash
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/sc_ws_snapshot_solo.html" class="md-nav__link">
        snapshot_solo
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/sc_ws_timeout_open.html" class="md-nav__link">
        timeout_open
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../node/api/examples/channels/json-rpc/sc_ws_update_with_meta.html" class="md-nav__link">
        update_with_meta
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" >
      
      <label class="md-nav__link" for="__nav_6">
        Mining
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Mining" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Mining
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../STRATUM.html" class="md-nav__link">
        Stratum
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../serializations.html" class="md-nav__link">
        Serializations
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    Introduction
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#notation" class="md-nav__link">
    Notation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    Overview
  </a>
  
    <nav class="md-nav" aria-label="Overview">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#blockchain" class="md-nav__link">
    Blockchain
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#blocks" class="md-nav__link">
    Blocks
  </a>
  
    <nav class="md-nav" aria-label="Blocks">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#genesis-block" class="md-nav__link">
    Genesis block
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#transactions" class="md-nav__link">
    Transactions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#transaction-signature" class="md-nav__link">
    Transaction signature
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#proof-of-work" class="md-nav__link">
    Proof of Work
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accounts" class="md-nav__link">
    Accounts
  </a>
  
    <nav class="md-nav" aria-label="Accounts">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#basic-or-plain-old-account" class="md-nav__link">
    Basic (or plain old) account
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#account-associated-to-a-contract" class="md-nav__link">
    Account associated to a contract
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#generic-account" class="md-nav__link">
    Generic account
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#p2p-network" class="md-nav__link">
    P2P network
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#coins-and-tokens" class="md-nav__link">
    Coins and tokens
  </a>
  
    <nav class="md-nav" aria-label="Coins and tokens">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ternity-tokens" class="md-nav__link">
    æternity tokens
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#specification" class="md-nav__link">
    Specification
  </a>
  
    <nav class="md-nav" aria-label="Specification">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#crypto" class="md-nav__link">
    Crypto
  </a>
  
    <nav class="md-nav" aria-label="Crypto">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#keys" class="md-nav__link">
    Keys
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#signatures" class="md-nav__link">
    Signatures
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#blocks_1" class="md-nav__link">
    Blocks
  </a>
  
    <nav class="md-nav" aria-label="Blocks">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#consensus-protocol-versions" class="md-nav__link">
    Consensus protocol versions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#key-blocks" class="md-nav__link">
    Key Blocks
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#micro-blocks" class="md-nav__link">
    Micro Blocks
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#transactions_1" class="md-nav__link">
    Transactions
  </a>
  
    <nav class="md-nav" aria-label="Transactions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#authorization-transactions" class="md-nav__link">
    Authorization transactions
  </a>
  
    <nav class="md-nav" aria-label="Authorization transactions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#signed-transaction" class="md-nav__link">
    Signed transaction
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#generic-account-meta-transaction" class="md-nav__link">
    Generic account meta transaction
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#common-fields-for-transactions" class="md-nav__link">
    Common fields for transactions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#spend-transaction" class="md-nav__link">
    Spend transaction
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#payingfor-transaction" class="md-nav__link">
    PayingFor transaction
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#contract-transactions" class="md-nav__link">
    Contract transactions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#oracle-transactions" class="md-nav__link">
    Oracle transactions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#naming-system-transactions" class="md-nav__link">
    Naming system transactions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#channel-transactions" class="md-nav__link">
    Channel transactions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#generalized-account-attach-transation" class="md-nav__link">
    Generalized account attach transation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gas" class="md-nav__link">
    Gas
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#proof-of-work_1" class="md-nav__link">
    Proof of Work
  </a>
  
    <nav class="md-nav" aria-label="Proof of Work">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#solution-encoding-rules" class="md-nav__link">
    Solution Encoding Rules
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#difficulty-target" class="md-nav__link">
    Difficulty target
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#target-adjustment" class="md-nav__link">
    Target adjustment
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/aeternity/protocol/edit/master/docs/consensus/README.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                <h1 id="ternity-consensus-protocol">æternity consensus protocol</h1>
<p>This document defines the æternity consensus protocol.</p>
<h2 id="introduction">Introduction</h2>
<p>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD",
"SHOULD NOT", "RECOMMENDED",  "MAY", and "OPTIONAL" in this document are to
be interpreted as described in <a href="https://tools.ietf.org/html/rfc2119">RFC 2119</a>.</p>
<h2 id="notation">Notation</h2>
<ul>
<li><code>x || y</code>, x concatenated with y</li>
<li><code>sk &lt;- rand(1^n)</code>, sample a random n bit number</li>
</ul>
<h2 id="overview">Overview</h2>
<h3 id="blockchain">Blockchain</h3>
<p>A blockchain is a specific instance of a distributed ledger made up from
blocks, which are arranged  as a tree with the root of the tree being the
<code>genesis block</code>. Each node in this tree has exactly one <code>parent</code> but can have
multiple children. Blocks specify their parent via the <code>prev_hash</code> field in
the block header, with the genesis block having a <code>prev_hash</code> of all <code>0</code>.</p>
<p>At any point, the <code>block height</code> is the distance from the current valid <code>top</code>
block to the genesis block. The genesis block has height zero.</p>
<p>A valid block here means valid according to the consensus rules described
below.</p>
<p>We use temporary random leader to build the tree of blocks.</p>
<p>In order to find the best valid chain given a tree of blocks, every node
operator in the network sums the amount of work (see Proof of Work) done on
each chain. The best valid chain is then the chain that has the most work
done. Any ties here will be resolved by the time a block was received at,
i.e. it will prefer the block it received first.</p>
<h3 id="blocks">Blocks</h3>
<p>This document depends on <a href="bitcoin-ng.html">Bitcoin-NG protocol</a> that describes rules for building blockchain.</p>
<p>Bitcoin NG introduces two types of blocks:</p>
<ol>
<li>Key Blocks - Key Blocks carry a Public Key of a leader and Proof-of-Work
   evidence and associated metadata</li>
<li>Micro Blocks - Micro Blocks carry transactions confirmed by a leader and
   associated metadata</li>
</ol>
<p>There may be <code>0-N</code> Micro Blocks between two Key Blocks. Micro Blocks are small and they are produced very often i.e. every three seconds.</p>
<p>Key Blocks are generated by miners. New coins are <a href="bitcoin-ng.html#rewards">introduced by each Key Block</a>.
Micro Blocks are generated by miners who become leaders by mining Key Blocks.</p>
<h4 id="genesis-block">Genesis block</h4>
<p>The genesis block is special in the sense that it does not have a parent and
contains the initial state of the æternity blockchain. Part of initial state
is generated from the distribution of the æternity ERC20 token on the
Ethereum blockchain.</p>
<p>The genesis block is a key block.</p>
<h3 id="transactions">Transactions</h3>
<p>æternity follows the "fat protocol" approach, which means that the protocol
itself has many features built in, as opposed to e.g. Ethereum, which maps
any functionality beyond basic transactions changing the state of an
account to smart contracts.</p>
<h3 id="transaction-signature">Transaction signature</h3>
<p>We sign serialized transaction (or the hash of the serialized transaction -
from Lima hard-fork) prefixed with the id of the network. See
<a href="../serializations.html#binary-serialization">serialization</a> definition for
details.</p>
<div class="highlight"><pre><span></span><code>NetworkId             :: binary()
SerializedObject      :: binary()
Signature             :: binary()

Signature = sign(NetworkId + SerializedObject)
or Signature = sign(NetworkId + Blake2b(SerializedObject))
</code></pre></div>
<p>Prefix defaults to <code>ae_mainnet</code> (<code>binary()</code>) and it is configurable via node config.
The prefix is not part of a serialized transaction. We add it only for signature.
Consider changing the id in case of forking the blockchain network,
in order to lower danger of replay attacks.</p>
<p><strong>Note:</strong> Post Lima hard-fork it is allowed to sign either the full serialized object, or
the hash of the serialized object; prefixed with the network id in either case.</p>
<h3 id="proof-of-work">Proof of Work</h3>
<p><a href="https://github.com/tromp/cuckoo">Cuckoo Cycle</a> is the algorithm used for proof of work.
It was designed to prevent the dynamics that have developed in Bitcoin and
similar systems, where the mining operations are dominated by special purpose
hardware. The problem being solved is that of finding cycles in a bipartite graph.</p>
<p>Proof of work is used for leader election, which happens via key blocks in
Bitcoin-NG. Micro blocks do not require any proof of work.</p>
<h3 id="accounts">Accounts</h3>
<p>Each account holds a balance, and can be of any one of the following types.</p>
<h4 id="basic-or-plain-old-account">Basic (or plain old) account</h4>
<p>The address is a public key.
It has an increasing nonce.
It authorizes a transaction by signing it.</p>
<p>For the actual wire format please consult the <a href="/serializations.md">serialisation</a> document.</p>
<h4 id="account-associated-to-a-contract">Account associated to a contract</h4>
<p>Please refer to the <a href="/contracts/contract_state_tree.md">dedicated document</a>.</p>
<h4 id="generic-account">Generic account</h4>
<p>Please refer to the <a href="/generalized_accounts/generalized_accounts.md">dedicated document</a>.</p>
<p>Available from the Fortuna consensus protocol version.</p>
<h3 id="p2p-network">P2P network</h3>
<p>The peer-to-peer network is not part of the consensus and will be described in a separate document.</p>
<h3 id="coins-and-tokens">Coins and tokens</h3>
<h4 id="ternity-tokens">æternity tokens</h4>
<p>We use the following denominations:</p>
<div class="highlight"><pre><span></span><code>1                          | aetto
1_000
1_000_000
1_000_000_000
1_000_000_000_000
1_000_000_000_000_000
1_000_000_000_000_000_000
</code></pre></div>
<h2 id="specification">Specification</h2>
<h3 id="crypto">Crypto</h3>
<p>Blake2b (256 bits digest) and ed25519</p>
<h4 id="keys">Keys</h4>
<p>Key generation is done according to <a href="https://tools.ietf.org/html/rfc8032#page-13">RFC8032</a>,
note that we have 64-byte secret keys that consists of the seed concatenated
with the public key in order to <a href="https://download.libsodium.org/doc/public-key_cryptography/public-key_signatures.html">save CPU cycles when
signing</a>
The public key is 32 byte.</p>
<h4 id="signatures">Signatures</h4>
<p>EDDSA (curve 25519), signature is 64 bytes.</p>
<h3 id="blocks_1">Blocks</h3>
<h4 id="consensus-protocol-versions">Consensus protocol versions</h4>
<table>
<thead>
<tr>
<th><code>PROTOCOL_VERSION</code></th>
<th>Name</th>
<th>Minimum height at which protocol is effective</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>Roma</td>
<td>0 (genesis)</td>
</tr>
<tr>
<td>2</td>
<td>Minerva</td>
<td>47800</td>
</tr>
<tr>
<td>3</td>
<td>Fortuna</td>
<td>90800</td>
</tr>
<tr>
<td>4</td>
<td>Lima</td>
<td>161150</td>
</tr>
<tr>
<td>5</td>
<td>Iris</td>
<td>441444</td>
</tr>
</tbody>
</table>
<p>The consensus protocol version number in each block is monotonically increasing in the chain of blocks.</p>
<h4 id="key-blocks">Key Blocks</h4>
<div class="highlight"><pre><span></span><code>PROTOCOL_VERSION: 1 (Roma release) or greater
</code></pre></div>
<ul>
<li>the timestamp of a key block MUST be smaller than <code>now() + 9m</code></li>
<li>the timestamp of a key block MUST be bigger than:</li>
<li>the median timestamp of the last 11 blocks (if height &gt;= 12)</li>
<li>the timestamp of the genesis block (if height &lt;= 11)</li>
<li>the version MUST match the expected <code>PROTOCOL_VERSION</code></li>
<li>the <code>pow_evidence</code> MUST be valid</li>
<li>MUST have <code>0 &lt;= nonce &lt;= MAX_NONCE</code></li>
<li>txs_hash MUST be correct root hash of the merkle tree of all transactions.</li>
<li><strong><em>TODO</em></strong>: fill in missing rules</li>
</ul>
<div class="highlight"><pre><span></span><code>PROTOCOL_VERSION: 2 (Minerva release) or greater
</code></pre></div>
<ul>
<li>an optional info field is added to the key header</li>
<li>the presense of the info field MUST be marked by setting the info field flag to 1</li>
<li>the absense of the info field MUST be marked by setting the info field flag to 0</li>
<li>the info field, if present, is uninterpreted, but included in the block hash (i,e., it is under consensus).</li>
</ul>
<p>Block/header <a href="../serializations.html#key-blockheader">serialization format</a></p>
<h4 id="micro-blocks">Micro Blocks</h4>
<div class="highlight"><pre><span></span><code>PROTOCOL_VERSION: 1 (Roma release) or greater
</code></pre></div>
<ul>
<li>the timestamp of a micro block MUST be smaller than <code>now() + 9m</code></li>
<li>if the previous block is a micro block:</li>
<li>the timestamp MUST be bigger than or equal to the timestamp of the previous block + 3s</li>
<li>if the previous block is a key block:</li>
<li>the timestamp MUST be bigger than the timestamp of the previous block</li>
<li>the version MUST match the expected <code>PROTOCOL_VERSION</code></li>
<li>the signature must be a valid signature produced by the issuer of
  the previous key block</li>
<li>the sum of gas of transactions in a micro block MUST be lower or equal to
  the gas limit per micro block</li>
<li><strong><em>TODO</em></strong>: fill in missing rules</li>
</ul>
<p>Header <a href="../serializations.html#micro-block-header">serialization format</a></p>
<p>Block <a href="../serializations.html#micro-block">serialization format</a></p>
<h3 id="transactions_1">Transactions</h3>
<h4 id="authorization-transactions">Authorization transactions</h4>
<h5 id="signed-transaction">Signed transaction</h5>
<div class="highlight"><pre><span></span><code> Fieldname       Size (bytes)
 -------------- -----
| data         | var |
 -------------- -----
| signatures   | var |
 -------------- -----
</code></pre></div>
<p>MUST have valid signature from private key belonging to <code>sender</code>.</p>
<p>For the actual wire format please consult the <a href="/serializations.md">serialisation</a> document.</p>
<h5 id="generic-account-meta-transaction">Generic account meta transaction</h5>
<p>Please refer to the <a href="/generalized_accounts/generalized_accounts.md">dedicated document</a>.</p>
<h4 id="common-fields-for-transactions">Common fields for transactions</h4>
<p>Each (on-chain) transaction has the following fields:
* Fee. It MUST be at least the gas for the transaction multiplied by the
  minimal gas price, which (after MINERVA hard fork height) is
  <code>1000000</code> (<em>10^-18) aeons. (Before MINERVA hard fork height it was
  <code>1</code> (</em>10^-18) aeons.)
* Time to live (TTL). The last generation where the transaction is valid.
  0 means it is valid forever (and is the default value in many places).</p>
<p><em>Note</em>: There is also a node configurable minimum gas price - this is the
minimum gas price a node accepts and is not under consensus. This value is
higher than or equal to the minimal gas price as dictated by consensus. For
contract transactions (Create, Call, GAAttach, GAMeta), the minumum applies to
both the <code>Fee</code> and the <code>GasPrice</code>.</p>
<h4 id="spend-transaction">Spend transaction</h4>
<div class="highlight"><pre><span></span><code> Fieldname       Size (bytes)
 -------------- -----
| sender       | 32  |
 -------------- -----
| recipient    | 32  |
 -------------- -----
| amount       | var |
 -------------- -----
| fee          | var |
 -------------- -----
| nonce        | 8   |
 -------------- -----
</code></pre></div>
<h4 id="payingfor-transaction">PayingFor transaction</h4>
<p>Available from protocol version 5, Iris release. The <code>tx</code> field size
depends on the size of the inner transaction.
<div class="highlight"><pre><span></span><code> Fieldname       Size (bytes)
 -------------- -----
| payer        | 32  |
 -------------- -----
| fee          | var |
 -------------- -----
| nonce        | 8   |
 -------------- -----
| tx           | var |
 -------------- -----
</code></pre></div></p>
<h4 id="contract-transactions">Contract transactions</h4>
<p>Please refer to the <a href="../contracts/contract_transactions.html">dedicated document</a>.</p>
<h4 id="oracle-transactions">Oracle transactions</h4>
<p>Please refer to the <a href="../oracles/oracle_transactions.html">dedicated document</a>.</p>
<h4 id="naming-system-transactions">Naming system transactions</h4>
<p>Please refer to the <a href="../AENS.html">dedicated document</a>.</p>
<h4 id="channel-transactions">Channel transactions</h4>
<p>Please refer to the <a href="../channels/ON-CHAIN.html">dedicated document</a>.</p>
<h4 id="generalized-account-attach-transation">Generalized account attach transation</h4>
<p>Please refer to the <a href="../generalized_accounts/index.html">dedicated document</a>.</p>
<h4 id="gas">Gas</h4>
<p>In order to control the size and the number of transactions in a micro block,
each transaction has a gas. The sum of gas of all the transactions cannot
exceed the gas limit per micro block, which is 6 000 000.</p>
<p>The gas of a transaction is the sum of:
* the base gas;
* other gas components, such as gas proportional to the byte size of the
  transaction or relative TTL, gas needed for contract execution.</p>
<table>
<thead>
<tr>
<th>Transaction</th>
<th>Base gas</th>
<th>Other gas components</th>
</tr>
</thead>
<tbody>
<tr>
<td>Spend</td>
<td><code>BaseGas</code></td>
<td>Proportional to the byte size of the transaction, specifically: <code>byte_size(SpendTx) * GasPerByte</code></td>
</tr>
<tr>
<td>Oracle register</td>
<td><code>BaseGas</code></td>
<td>Proportional to oracle TTL argument <code>TTL</code> (interpreted as relative), specifically: <code>ceiling(32000 * RelativeTTL / floor(60 * 24 * 365 / key_block_interval))</code> and the byte size of the transaction, specifically: <code>byte_size(OracleRegisterTx) * GasPerByte</code></td>
</tr>
<tr>
<td>Oracle query</td>
<td><code>BaseGas</code></td>
<td>Proportional to oracle query TTL argument <code>QTTL</code> (interpreted as relative), specifically: <code>ceiling(32000 * RelativeTTL / floor(60 * 24 * 365 / key_block_interval))</code> and the byte size of the transaction, specifically: <code>byte_size(OracleQueryTx) * GasPerByte</code></td>
</tr>
<tr>
<td>Oracle respond</td>
<td><code>BaseGas</code></td>
<td>Proportional to oracle response TTL argument <code>RTTL</code> in oracle query (as found in the oracle query in the state, and interpreted as relative), specifically: <code>ceiling(32000 * RelativeTTL / floor(60 * 24 * 365 / key_block_interval))</code> and the byte size of the transaction, specifically: <code>byte_size(OracleRespondTx) * GasPerByte</code></td>
</tr>
<tr>
<td>Oracle extend</td>
<td><code>BaseGas</code></td>
<td>Proportional to oracle TTL argument <code>TTL</code> (interpreted as relative), specifically: <code>ceiling(32000 * RelativeTTL / floor(60 * 24 * 365 / key_block_interval))</code> and the byte size of the transaction, specifically: <code>byte_size(OracleExtendTx) * GasPerByte</code></td>
</tr>
<tr>
<td>Name preclaim</td>
<td><code>BaseGas</code></td>
<td>Proportional to the byte size of the transaction, specifically: <code>byte_size(NamePreclaimTx) * GasPerByte</code></td>
</tr>
<tr>
<td>Name claim</td>
<td><code>BaseGas</code></td>
<td>Proportional to the byte size of the transaction, specifically: <code>byte_size(NameClaimTx) * GasPerByte</code></td>
</tr>
<tr>
<td>Name update</td>
<td><code>BaseGas</code></td>
<td>Proportional to the byte size of the transaction, specifically: <code>byte_size(NameUpdateTx) * GasPerByte</code></td>
</tr>
<tr>
<td>Name transfer</td>
<td><code>BaseGas</code></td>
<td>Proportional to the byte size of the transaction, specifically: <code>byte_size(NameTransferTx) * GasPerByte</code></td>
</tr>
<tr>
<td>Name revoke</td>
<td><code>BaseGas</code></td>
<td>Proportional to the byte size of the transaction, specifically: <code>byte_size(NameRevokeTx) * GasPerByte</code></td>
</tr>
<tr>
<td>Channel create</td>
<td><code>BaseGas</code></td>
<td>Proportional to the byte size of the transaction, specifically: <code>byte_size(ChannelCreateTx) * GasPerByte</code></td>
</tr>
<tr>
<td>Channel deposit</td>
<td><code>BaseGas</code></td>
<td>Proportional to the byte size of the transaction, specifically: <code>byte_size(ChannelDepositTx) * GasPerByte</code></td>
</tr>
<tr>
<td>Channel withdraw</td>
<td><code>BaseGas</code></td>
<td>Proportional to the byte size of the transaction, specifically: <code>byte_size(ChannelWithdrawTx) * GasPerByte</code></td>
</tr>
<tr>
<td>Channel settle</td>
<td><code>BaseGas</code></td>
<td>Proportional to the byte size of the transaction, specifically: <code>byte_size(ChannelSettleTx) * GasPerByte</code></td>
</tr>
<tr>
<td>Channel slash</td>
<td><code>BaseGas</code></td>
<td>Proportional to the byte size of the transaction, specifically: <code>byte_size(ChannelSlashTx) * GasPerByte</code></td>
</tr>
<tr>
<td>Channel close solo</td>
<td><code>BaseGas</code></td>
<td>Proportional to the byte size of the transaction, specifically: <code>byte_size(ChannelCloseSoloTx) * GasPerByte</code></td>
</tr>
<tr>
<td>Channel close mutual</td>
<td><code>BaseGas</code></td>
<td>Proportional to the byte size of the transaction, specifically: <code>byte_size(ChannelCloseMutualTx) * GasPerByte</code></td>
</tr>
<tr>
<td>Channel snapshot solo</td>
<td><code>BaseGas</code></td>
<td>Proportional to the byte size of the transaction, specifically: <code>byte_size(ChannelSnapshotSoloTx) * GasPerByte</code></td>
</tr>
<tr>
<td>Channel force progress</td>
<td><code>BaseGas</code> before Fortuna and <code>30 * BaseGas</code> from Fortuna on</td>
<td>Proportional to the byte size of the transaction, specifically: <code>byte_size(ChannelForceProgressTx) * GasPerByte</code>. It may also include gas for contract execution.</td>
</tr>
<tr>
<td>Channel offchain</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>Contract create</td>
<td><code>5 * BaseGas</code></td>
<td>Proportional to the byte size of the transaction, specifically: <code>byte_size(ContractCreateTx) * GasPerByte</code>. It also includes gas for contract execution.</td>
</tr>
<tr>
<td>Contract call (FATE)</td>
<td><code>12 * BaseGas</code></td>
<td>Proportional to the byte size of the transaction, specifically: <code>byte_size(ContractCallTx) * GasPerByte</code>. It also includes gas for contract execution.</td>
</tr>
<tr>
<td>Contract call (AEVM)</td>
<td><code>30 * BaseGas</code></td>
<td>Proportional to the byte size of the transaction, specifically: <code>byte_size(ContractCallTx) * GasPerByte</code>. It also includes gas for contract execution.</td>
</tr>
<tr>
<td>GA Attach</td>
<td><code>5 * BaseGas</code></td>
<td>Proportional to the byte size of the transaction, specifically: <code>byte_size(GAAttachTx) * GasPerByte</code>. It also includes gas for execution of the init function.</td>
</tr>
<tr>
<td>GA Meta</td>
<td><code>5 * BaseGas</code></td>
<td>Fortuna and Lima : Proportional to the byte size of the transaction, specifically: <code>byte_size(GAMetaTx) * GasPerByte</code>. It also includes gas for execution of the authentication function + recursively gas corresponding to the wrapped transaction(s) (excluding the byte size portion - in order not to account for the size of wrapped transactions multiple times).</td>
</tr>
<tr>
<td></td>
<td><code>5 * BaseGas</code></td>
<td>From Iris        : Proportional to the byte size of GAMeta part of transaction, specifically: <code>(byte_size(GAMetaTx) - byte_size(InnerTx)) * GasPerByte</code>. It also includes gas for execution of the authentication function + recursively gas corresponding to the wrapped transaction(s)</td>
</tr>
<tr>
<td>PayingFor</td>
<td><code>BaseGas / 5</code></td>
<td>Proportional to the byte size of the PayingFor part of the transaction, specifically: <code>(byte_size(PayingForTx) - byte_size(InnerTx)) * GasPerByte</code>.</td>
</tr>
</tbody>
</table>
<p><code>BaseGas</code> is 15 000.</p>
<p><code>GasPerByte</code> is 20.</p>
<h3 id="proof-of-work_1">Proof of Work</h3>
<div class="highlight"><pre><span></span><code>HIGHEST_TARGET_SCI: 0x2100ffff
HIGHEST_TARGET_INT: 0xffff000000000000000000000000000000000000000000000000000000000000
NONCE_BITS: 64
MAX_NONCE: 0xffffffffffffffff
EXPECTED_BLOCK_MINE_RATE: 60 * 3 # every 3 minutes
RECALCULATE_DIFFICULTY_FREQUENCY: 10
</code></pre></div>
<p><a href="https://github.com/tromp/cuckoo">Cuckoo cycle</a> is used as the proof of work
algorithm. Solutions take the form of arrays length <code>l</code>, where <code>l</code> is the length
(<code>PROOFSIZE</code>) of the cycle in the bipartite graph. The size of the graph is denoted
by <a href="https://github.com/tromp/cuckoo/blob/488c03f5dbbfdac6d2d3a7e1d0746c9a7dafc48f/src/cuckoo.h#L11"><code>the 2-log of the graph size, which is the size in bits of the node identifiers</code></a> <code>EDGEBITS</code>. The difficulty
of a graph with <code>M</code> nodes and <code>N</code> edges is based on the ratio <code>M/N</code>, with the standard
implementation being fixed at <code>M/N = 1/2</code>. Please refer to the <a href="https://github.com/tromp/cuckoo/blob/master/doc/cuckoo.pdf?raw=true">whitepaper</a> for more details. These indices are refered to as <code>micrononces</code>, not
to be confused with the nonce included in the header itself.
This graph is generated by hashing every edge <code>i in (0..N)</code> twice with a keyed hash
function <code>h</code> (<a href="https://131002.net/siphash/">SipHash</a>). The <code>key</code> used for these operations
is the hash of a block header plus a nonce. The first node belonging to every edge is
given by hashing <code>h(key, index*2)</code> and the second by <code>h(key, index*2+1)</code>.</p>
<p>Current defaults:</p>
<div class="highlight"><pre><span></span><code>PROOFSIZE: 42
EDGEBITS: 29
</code></pre></div>
<div class="highlight"><pre><span></span><code>header = version || flags || height || prev_hash || prev_key_hash || state_hash || miner || beneficiary || target || evidence || nonce || time
           32         32       64         256            256            256         256         256          32       42*32       64       64
</code></pre></div>
<p>For the purpose of computing a proof of work puzzle solution, the evidence and
nonce are set to <code>[0] * 42</code> and <code>0</code> respectively, since neither are available
before the puzzle has been solved.</p>
<p>When a node receives a new key block it must repeat the process, setting
evidence and nonce to all 0, in order to be able to validate the proof of work.</p>
<div class="highlight"><pre><span></span><code>h_header = Blake2b(header)
</code></pre></div>
<p>The default <code>key</code> for cuckoo is 80 bytes long. The <code>nonce</code> here is expressed
in little-endian notation, to keep consistent with cuckoo cycle, which does
the same. Note that both the hashed header and the nonce are base64 encoded.
This means that the hashed header is 44 bytes long, and the nonce is 12 bytes.</p>
<div class="highlight"><pre><span></span><code>key = h_header || nonce || 0..0
        352        92      196
</code></pre></div>
<p>A valid solution MUST:</p>
<ul>
<li>be encoded according to the solution encoding rules</li>
<li>form a cycle (<strong><em>TODO: make this more precise</em></strong>)</li>
<li>only contain <code>micrononces &lt; 2^EDGEBITS - 1</code></li>
<li>have micrononces in ascending order</li>
<li>pass the difficulty check</li>
</ul>
<h4 id="solution-encoding-rules">Solution Encoding Rules</h4>
<p>Since <code>EDGEBITS &lt; 32</code>, we can encode an edge as a 32bit integer, otherwise
it would have to be 64 bits. Therefore a solution is currently <code>[u32; 42]</code>.</p>
<h4 id="difficulty-target">Difficulty target</h4>
<p>See <a href="https://github.com/tromp/cuckoo/blob/master/doc/cuckoo.pdf?raw=true">Chapter 9 of the cuckoo cycle paper</a>:</p>
<blockquote>
<p>For further control, a difficulty target 0 &lt; T &lt; 2^256 is introduced, and
we impose the additional constraint that the Blake2b 256 bit digest of the
cycle nonces in ascending order be less than T, thus reducing the success
probability by a factor of 2^256.</p>
</blockquote>
<p>Thus we adopt the target notion from Bitcoin and also use the same way to
express it.</p>
<p>The target threshold relates to another value: the difficulty. This is
proportional to the hardness of the PoW task:</p>
<div class="highlight"><pre><span></span><code>difficulty = &lt;target of difficulty 1&gt; / target
</code></pre></div>
<p>a floating point value.</p>
<p>Bitcoin uses <code>0x00000000FFFF0000000000000000000000000000000000000000000000000000</code>\
as Difficulty 1 target (<code>0x1d00ffff</code> in scientific notation, see below). For
Cuckoo Cycle we need a lighter filtering of solutions than for SHA-256 as the
basic algorithm is much slower than a simple hash generation, so we use the
largest possible value: <code>0xFFFF000000000000000000000000000000000000000000000000000000000000</code>
(<code>0x2100ffff</code> in scientific notation) as difficulty 1.</p>
<p>We store the current target threshold in the block header in scientific
notation.
Difficulty is used to select the winning fork of new blocks: the difficulty of a chain of blocks is the sum of the difficulty of each block.</p>
<p>Integers represented in scientific notation:
<code>2^24 * &lt;base-2 exponent + 3&gt; + the first 3 most significant bytes</code> (i.e.,
the <a href="https://en.wikipedia.org/wiki/Significand">significand</a>).
The + 3 corresponds to the length of the significand (i.e., the int value is
<code>0.&lt;significand&gt; * 8^&lt;exponent&gt;</code>).
https://en.bitcoin.it/wiki/Difficulty#How_is_difficulty_stored_in_blocks.3F)</p>
<h4 id="target-adjustment">Target adjustment</h4>
<p>Some concepts:</p>
<div class="highlight"><pre><span></span><code>Difficulty = HIGHEST_TARGET / Target
Rate       = Capacity / Difficulty  (blocks/ms)
Capacity   = number of potential solutions per ms generated by miners

DesiredTimeBetweenBlocks = aec_governance:expected_block_mine_rate()
DesiredRate              = 1 / DesiredTimeBetweenBlocks
</code></pre></div>
<p>The basic idea of the algorithm is to estimate the current network capacity
based on the <code>N</code> (= 17) previous blocks and use that to set the new
target:</p>
<div class="highlight"><pre><span></span><code>NewDifficulty = EstimatedCapacity / DesiredRate
NewTarget     = HIGHEST_TARGET / NewDifficulty
              = HIGHEST_TARGET * DesiredRate / EstimatedCapacity
</code></pre></div>
<p>We can estimate the network capacity used to mine a given block <code>i</code> as</p>
<div class="highlight"><pre><span></span><code>EstimatedCapacity[i] = Difficulty[i] / MiningTime[i]
MiningTime[i]        = Time[i] - Time[i - 1]
</code></pre></div>
<p>The estimated capacity across all <code>N</code> blocks is then the weighted (by time)
average of the estimated capacities for each block. Note, since <code>MiningTime[i]</code>
require <code>Time[i - 1]</code> and we do not use the genesis block timestamp in target
adjustment we cannot start using the target estimation until block <code>N + 2 (= 19)</code>.</p>
<div class="highlight"><pre><span></span><code>EstimatedCapacity = Sum(EstimatedCapacity[i] * MiningTime[i]) / TotalTime
                  = Sum(Difficulty[i]) / TotalTime
                  = Sum(HIGHEST_TARGET / Target[i]) / TotalTime
</code></pre></div>
<p>To get a good trade-off between response time and stability we use a variant of
<a href="https://github.com/zawy12/difficulty-algorithms/issues/9">DigiShield</a>.
That means we compute a tempered TotalTime (total solve time in algorithm description):</p>
<div class="highlight"><pre><span></span><code>TotalTime&#39;        = Sum(SolveTime[i])
SolveTime[i]      = max(-FTL, min(6 * DesiredTimeBetweenBlocks, Time[i] - Time[i-1]))
TemperedTotalTime = 0.75 * N * DesiredTimeBetweenBlocks + 0.2523 * TotalTime
</code></pre></div>
<p>Where FTL = Future Time Limit - i.e. the time a block is allowed to be
"from the future". We use 9 minutes (540 s) i.e. 3 times the <code>DesiredTimeBetweenBlocks</code>.</p>
<p>Now, the problem is that we can't do any floating point arithmetic (to
ensure the calculation can be verified by other nodes), so we pick a
reasonably big integer K (= HIGHEST_TARGET * 2^32) and compute</p>
<div class="highlight"><pre><span></span><code>EstimatedCapacity ≈ Sum(K * HIGHEST_TARGET div Target[i]) / TotalTime / K
TemperedTotalTime ≈ (3 * N * DesiredTimeBetweenBlocks) div 4 + (2523 * TotalTime&#39;) div 10000
</code></pre></div>
<p>Then</p>
<div class="highlight"><pre><span></span><code>NewTarget = HIGHEST_TARGET * DesiredRate / EstimatedCapacity
          ≈ HIGHEST_TARGET * DesiredRate * TotalTime * K / Sum(K * HIGHEST_TARGET div Target[i])
          ≈ DesiredRate * TotalTime * K / Sum(K div Target[i])
          ≈ TotalTime * K div (DesiredTimeBetweenBlocks * Sum(K div Target[i]))
</code></pre></div>
                
              
              
                


              
            </article>
          </div>
        </div>
        
      </main>
      
        
<footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../sync/index.html" class="md-footer__link md-footer__link--prev" aria-label="Previous: Sync" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Sync
            </div>
          </div>
        </a>
      
      
        
        <a href="bitcoin-ng.html" class="md-footer__link md-footer__link--next" aria-label="Next: Bitcoin-NG" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Bitcoin-NG
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
        
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "..", "features": ["content.tabs.link", "search.highlight", "search.share", "search.suggest"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../assets/javascripts/workers/search.477d984a.min.js", "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.82b56eb2.min.js"></script>
      
    
  </body>
</html>